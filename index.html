<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="css/style.css" rel="stylesheet"><title>Concert Map</title><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA8B9NC0lW-vqhQzWmVp8XwEMFbyg01blI&libraries=places"></script></head><body><!-- GOOGLE MAP --><div class="map-canvas" data-bind="googlemap: { mapBounds: mapBounds() }"></div><!-- INFO WINDOW CONTENT --><div class="info-window-container" style="display: none"><div class="info-content" data-bind="if: currentVenue"><div data-bind="with: currentVenue"><h2 class="window-header clickable" data-bind="text: name, click: selectVenue;"></h2><ul data-bind="foreach: concerts"><li class="clickable" data-bind="click: selectEvent"><hr><h4><span data-bind="text: artists[0].name"></span> <span class="subtitle" data-bind="text: subtitle"></span></h4><p class="window-event-date date"><!-- TODO: make new timeinfo
                                //'<span data-bind="text: datetime"></span>, ' +--> <span data-bind="text: timeInfo.day"></span>, <span data-bind="text: timeInfo.date"></span></p></li></ul></div></div></div><!-- MENU TOGGLE --> <a class="menu-toggle clickable" data-bind="click: function() { toggleMenu() }, css: { open: showMenu() }"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"/></svg> </a><!-- EVENT SEARCH --> <input class="menu-interface event-search search-box" data-bind="hasFocus: searchBarFocus, textInput: searchInput, css: { open: showMenu() }" placeholder="search concerts"><!-- ASK IF USER WANTS LAST.FM ARTIST INFO --><!-- ko if: askForArtistInfo() --> <!-- ko template: { name: 'request-info' } --><!-- /ko --><script type="text/html" id="request-info"><div class="request-artist-info">
                <h4>Want better search results?</h4>
                <p>If you choose to request info about each artist from Last.fm, you'll be able to search events by detailed info about the artists, such as genre.</p>
                <p>Right now you can only search events by artists' names and venues' names and addresses.</p>
                <p> Note: Last.fm info usually loads quickly, but may be slow depending on Last.fm's servers</p>
                <div>
                    <button class="clickable" data-bind="click: function() { requestAllArtistInfo(true); dontAsk(true);}">Yes</button><button class="clickable" data-bind="click: function() { manualToggle(false); }">No</button><button class="clickable" data-bind="click: function() { dontAsk(true); }">Don't Ask Again</button>
                </div>
            </div></script><!-- /ko --><!-- LOCATION SEARCH --> <input class="location-search menu-interface search-box" data-bind="value: currentAddress, css: { open: showMenu() }"><!-- INFO LIST TOGGLE --><div class="list-toggle menu-interface" data-bind="css: { open: showMenu() }"><button class="list-button clickable" data-bind="css: { pressed: listEvents() }, click: function () { showEvents(); }">EVENTS</button><button class="list-button clickable" data-bind="css: { pressed: listVenues() }, click: function () { showVenues(); }">VENUES</button> <button class="info-button clickable" data-bind="css: { pressed: extraInfoBoolean() }, click: toggleExtraInfo">SHOW INFO POP-UP</button></div><div class="menu-interface list-container" data-bind="css: { open: showMenu() }, click: function() { toggleMenu() }"><!-- TODO: redundancies with having both an event & venue list
                        (e.g. error msgs aren't DRY, etc.) --><p class="map-error"></p><p data-bind="visible: !filteredEvents().length && !concertsStatus">no results</p><p data-bind="text: concertsStatus"></p><p data-bind="text: geocoderStatus"></p><p data-bind="text: allArtistStatusUpdate"></p><p data-bind="if: searchInput">Search Results for: "<span data-bind="text: searchInput"></span>"</p><!-- EVENT LIST --><ul data-bind="visible: listEvents(), foreach: filteredEvents"><li class="clickable" data-bind="click: selectEvent"><hr><h4><span data-bind="text: artists[0].name"></span> <span class="subtitle" data-bind="text: subtitle"></span></h4><span data-bind="text: timeInfo.day"></span> <span data-bind="text: timeInfo.date"></span><p></p><p class="italic" data-bind="text: venue.name"></p></li></ul><!-- VENUE LIST --><ul data-bind="visible: listVenues(), foreach: filteredVenues"><li class="clickable" data-bind="click: selectFilteredVenue"><hr><h4 data-bind="text: name"></h4><p class="pale-text"><span data-bind="text: city"></span>, <span data-bind="text: region"></span></p><p class="italic"><span data-bind="text: concerts.length"></span> <span data-bind="if: concerts.length > 1">events</span> <span data-bind="if: concerts.length == 1">event</span></p></li></ul></div><!-- EXTRA INFO DISPLAY --><div class="extra-info" data-bind="css: { open: showExtraInfo() }"><a class="close-button clickable" data-bind="click: function() { closeExtraInfo(); }">&#10006</a><!-- EVENT INFO --><div data-bind="visible: showEventInfo(), with: currentEvent"><div><h4><span data-bind="text: artists()[0].name"></span> <span class="subtitle" data-bind="text: subtitle"></span></h4><p class="pale-text"><span data-bind="text: timeInfo.time"></span><br><span data-bind="text: timeInfo.day"></span> <span data-bind="text: timeInfo.date"></span><br><span data-bind="text: timeInfo.year"></span></p></div><h4>Artists</h4><hr><ul data-bind="foreach: artists"><li><a class="highlight clickable" data-bind="text: name, click: function() { selectArtist($data); }"></a><div data-bind="if: $data.lastfm"><!-- ko if: lastfm.artist --><ul class="tags" data-bind="foreach: lastfm.artist.tags.tag"><li class="highlight clickable" data-bind="text: name, click: function() { searchInput(this.name()) }"></li></ul><span class="italic" data-bind="if: !lastfm.artist.tags.tag().length">no genre info</span><!-- /ko --> <span class="italic" data-bind="if: $data.lastfm.status">no additional info</span></div></li><br></ul><h4><span>Venue</span> <a class="highlight clickable subtitle" data-bind="text: venue.name, click: function() { selectVenue(); }"></a></h4><a data-bind="attr: { href: url }">Bands in Town Event Page</a><br><p data-bind="if: tickets_available"><a data-bind="attr: { href: ticket_url }">Get Tickets</a></p></div><!-- VENUE INFO --><div data-bind="visible: showVenueInfo(), with: currentVenue"><p data-bind="text: venueInfoStatus"></p><h3 data-bind="text: name"></h3><!-- ko if: !currentVenueFourSquare() && !currentVenuePlaces() --><p class="pale-text"><span data-bind="text: city"></span>, <span data-bind="text: region"></span></p><!-- /ko --><p class="pale-text" data-bind="with: currentVenueFourSquare"><span data-bind="text: location.address"></span><br><span data-bind="text: location.city"></span>, <span data-bind="text: location.state"></span><br><span data-bind="text: contact.formattedPhone"></span></p><!-- ko if: !currentVenueFourSquare()--><p class="pale-text" data-bind="with: currentVenuePlaces"><span data-bind="text: formatted_address"></span><br><!-- ko if: currentVenuePlaces().formatted_phone_number --> <span data-bind="text: formatted_phone_number"></span><!-- /ko --></p><!-- /ko --><h4>Upcoming Events</h4><ul data-bind="foreach: concerts"><li><a class="highlight clickable" data-bind="text: artists[0].name, click: self.selectEvent"></a> <span class="subtitle" data-bind="text: subtitle"></span> - <span class="pale-text" data-bind="text: timeInfo.date"></span></li><br></ul><div data-bind="with: currentVenueFourSquare"><hr><p><span class="italic">four square info for:</span><br><span data-bind="text: name"></span></p><p data-bind="if: $data.rating"><span class="pale-text">Rating </span><span class="italic" data-bind="text: $data.rating"></span><!-- rating range --> <span>/10</span></p><ul class="tags" data-bind="foreach: categories"><li data-bind="text: shortName"></li></ul><div data-bind="if: $data.description"><p class="italic">Description</p><p data-bind="text: $data.description"></p></div><hr><p data-bind="if: $data.url"><a data-bind="attr: { href: url }">Official Site</a></p><p><a data-bind="attr: { href: canonicalUrl }">Four Square Page</a></p></div><div data-bind="with: currentVenuePlaces"><hr><p><span class="italic">google places info for:</span><br><span data-bind="text: name"></span></p><p data-bind="if: $data.rating"><span class="pale-text">Rating </span><span class="italic" data-bind="text: rating"></span><!-- rating range --> <span>/5</span></p><ul class="tags" data-bind="foreach: types"><li data-bind="text: $data"></li></ul><hr><!-- ko if: currentVenuePlaces().website --><p><a data-bind="attr: { href: website }">Official Site</a></p><!-- /ko --><p><a data-bind="attr: { href: url }">Google Places Page</a></p></div><p><a data-bind="attr: { href: url }">Bands in Town Page</a></p></div><!-- ARTIST INFO --><div data-bind="visible: showArtistInfo(), with: currentArtist"><a class="highlight clickable" data-bind="click: function() {backToEvent(currentEvent())}">back to event page</a><h3 data-bind="text: name"></h3><!-- ko if: $data.lastfm --><p data-bind="text: lastfm.status"></p><div data-bind="if: lastfm.artist"><ul class="tags" data-bind="foreach: lastfm.artist.tags.tag"><li class="highlight clickable" data-bind="text: name, click: function(){searchInput($data.name())}"></li></ul><h4>Bio</h4><p data-bind="html: lastfm.artist.bio.summary"></p></div><!-- /ko --><p><a data-bind="attr : { href: url }"><span data-bind="text: name"></span>'s Bands in Town Page</a></p><h4>Youtube Search Results for "<span data-bind="text: name"></span>"</h4><p data-bind="text: youtubeStatus"></p><ul data-bind="foreach: currentArtistYoutube"><li class="youtube-link"><a data-bind="text: snippet.title, attr : { href: url }"></a></li></ul></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script><script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.3.0.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script><script src="js/app.js" inline></script></body></html>