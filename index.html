<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link href="css/main.css" rel="stylesheet" type="text/css"></link>
        <link href="css/responsive.css" rel="stylesheet" type="text/css"></link>
        <title>Concert Map</title>

        <script type='text/javascript' src="http://maps.google.com/maps/api/js?sensor=false&.js"></script>


    </head>

    <body>
        <div id="map-canvas" data-bind="googlemap: { mapCenter: mapCenter() }, click: function(){closeMobile()}"></div>
        <a id="menu-toggle" id="small-menu" class="menu" data-bind="click: function() { openMobile(); toggleBigMenu() }">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"/>
          </svg>
        </a>
        <!-- TODO remane mobileOpen to conform with naming conventions (but knockout doesn't like dashes) -->
        <div id="event-search" class="mobile-menu" data-bind="css: { open: displayMobile(), bigOpen: displayBigMenu() }">
            <input class="search-box" data-bind="textInput: searchInput" placeholder="search concerts">
        </div>
        <div id="event-list" class="mobile-menu" data-bind="css: { open: displayMobile(), bigOpen: displayBigMenu() }">
            <span class="no-results" data-bind="visible: !filteredList().length">no results</span>
            <ul data-bind="foreach: filteredList, click: function(){ closeMobile() }">
                <li data-bind="click: selectMarker">
                    <hr>
                    <p data-bind="text: title"></p>
                    <p data-bind="text: venue.name"></p>
                    <p data-bind="text: startDate"></p>
                </li>
            </ul>
        </div>
        <div id="location-search" class="mobile-menu" data-bind="css: { open: displayMobile(), bigOpen: displayBigMenu() }">
            <input class="search-box" data-bind="value: currentAddress">
        </div>
        <!-- TODO: display currentEvent in #event-info, transform window into view when event is selected) -->
        <div class="event-info" data-bind="css: { eventOpen: showEventInfo() }, with: currentEvent">
            <div>
                <p data-bind="text: title"></p>
                <p data-bind="text: startDate"></p>
            </div>
            <p>Artists:</p>
            <ul data-bind="foreach: artists.artist">
                <li>
                    <p data-bind="text: $data"></p>
                </li>
            </ul>
<!--
            <p data-bind="if: currentEvent().description">Description: <span data-bind="html: currentEvent().description"></span></p>
            -->
            <!-- TODO: make currentEventTags observable array? -->
            <!-- ATM nested object properties aren't working.... -->
            <!--
            <p data-bind="if: currentEvent().tags">Tags:
                <ul data-bind="foreach: currentEvent().tags.tag">
                    <li data-bind="text: $data"></li>
                </ul>
            </p>
            <p data-bind="text: currentEvent().venue.name"></p>
            <p>Last.fm Event Page: <span data-bind="text: currentEvent().url"></span> -->
            <button data-bind="click: function() { showEventInfo(false); }">Close</button>
        </div>

        <script type='text/javascript' src='js/libraries/jquery-2.1.3.min.js'></script>
        <script type='text/javascript' src='js/libraries/knockout-3.3.0.js'></script>
        <script type='text/javascript' src='js/libraries/knockout.mapping-latest.js'></script>
        <script type='text/javascript' src="js/app.js"></script>

    </body>
</html>