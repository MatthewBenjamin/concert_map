<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link href="css/main.css" rel="stylesheet" type="text/css"></link>
        <link href="css/responsive.css" rel="stylesheet" type="text/css"></link>
        <title>Concert Map</title>

        <script type='text/javascript' src="http://maps.google.com/maps/api/js?sensor=false&.js"></script>


    </head>

    <body>
        <div id="map-canvas" data-bind="googlemap: { mapCenter: mapCenter() }"></div>
        <a id="small-menu" class="menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"/>
          </svg>
        </a>
        <a id="big-menu" class="menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"/>
          </svg>
        </a>
        <div class="mobile-menu">
                <input id="event-search" class="search-box" data-bind="textInput: searchInput" placeholder="search concerts">
                <span class="no-results" data-bind="visible: !filteredList().length">no results</span>
                <ul data-bind="foreach: filteredList">

                    <li>
                        <hr>
                        <p data-bind="text: title, click: selectMarker"></p>
                        <p data-bind="text: venue.name, click: selectMarker"></p>
                        <p data-bind="text: startDate, click: selectMarker"></p>
                    </li>
                </ul>
                <input class="search-box" data-bind="value: currentAddress">
        </div>

        <script type='text/javascript' src='js/libraries/jquery-2.1.3.min.js'></script>
        <script type='text/javascript' src='js/libraries/knockout-3.3.0.js'></script>
        <script type='text/javascript' src="js/app.js"></script>

        <script>
        // TODO: move to it's own file or integrate into app.js
        // close menu event event li is clicked
          /*
           * Open the drawer when the menu ison is clicked.
           */
          var smallMenu = document.querySelector('#small-menu');
          var bigMenu = document.querySelector('#big-menu');
          var main = document.querySelector('#map-canvas');
          var drawer = document.querySelector('.mobile-menu');
          var events = document.querySelector('ul');

          smallMenu.addEventListener('click', function(e) {
            console.log('Menu click, open');
            drawer.classList.toggle('open');
            e.stopPropagation();
          });

          bigMenu.addEventListener('click', function(e) {
            drawer.classList.toggle('close');
          })

          main.addEventListener('click', function() {
            //console.log('Map click, remove close');
            drawer.classList.remove('open');
          });

          events.addEventListener('click', function() {
            //console.log("You've clicked on an event!");
            drawer.classList.remove('open');
          });

        </script>
    </body>
</html>